/**
 * cxCalendar
 * @version 3.0.0
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxCalendar
 * @license Released under the MIT license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).cxCalendar=t()}(this,(function(){"use strict";const e={dom:{},events:{},reg:{isYear:/^\d{4}$/,isTime:/^\d{1,2}(\:\d{1,2}){1,2}$/},cacheDate:{},cxId:1,bindFuns:{},isElement:function(e){return!(!e||"function"!=typeof HTMLElement&&"object"!=typeof HTMLElement||!(e instanceof HTMLElement))||!(!e||!e.nodeType||1!==e.nodeType)},isInteger:function(e){return"number"==typeof e&&!isNaN(e)&&/^\d+$/.test(e)},isObject:function(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))},isDate:function(e){return(e instanceof Date||"[object Date]"===Object.prototype.toString.call(e))&&isFinite(e.getTime())}};let t;e.extend=function(e,...t){const a=this;if(a.isObject(e)){for(let n of t)if(a.isObject(n))for(let t in n)Array.isArray(n[t])?e[t]=[].concat(n[t]):a.isObject(n[t])?(a.isObject(e[t])||(e[t]={}),a.extend(e[t],n[t])):e[t]=n[t];return e}},e.fillLeadZero=function(e,t){let a=String(e);return a.length<t&&(a=Array(t-a.length).fill(0).join("")+e),a},e.getMonthDays=function(e){return[31,28+(e%4==0&&e%100!=0||e%400==0?1:0),31,30,31,30,31,31,30,31,30,31]},e.getWeekNum=function(e){const t=this,a=e.getTime(),n=new Date(e.getFullYear(),0,1,0,0,0,0);let s=n.getTime(),o=n.getDay(),i=0;return 0===o&&(o=7),s+=o>4?864e5*(8-o):864e5*(1-o),a<s?i=t.getWeekNum(new Date(e.getFullYear()-1,11,31)):(i=Math.floor((a-s)/864e5)+1,i=Math.ceil(i/7)),i},e.parseDate=function(e,t){const a=this;let n=new Date;if(a.reg.isYear.test(e))n.setFullYear(parseInt(e,10));else if(a.isInteger(e))n.setTime(parseInt(e,10));else if("string"==typeof e&&e.length){let t;a.reg.isTime.test(e)?(t=e.split(":").map((e=>parseInt(e,10))),t.length<4?t=t.concat(Array(4-t.length).fill(0)):t.length>4&&(t.length=4),n.setHours.apply(n,t)):(e=e.replace(/[\.\/]/g,"-"),/^\d{1,2}-\d{1,2}/.test(e)?e=n.getFullYear()+"-"+e:/^\d{4}-\d{1,2}$/.test(e)&&(e+="-1"),t=e.split(/[\-\sT\:]/).map((e=>parseInt(e,10))),t.length>1&&(t[1]-=1),t.length<7?t=t.concat(Array(7-t.length).fill(0)):t.length>7&&(t.length=7),n.setFullYear.apply(n,t.slice(0,3)),n.setHours.apply(n,t.slice(3)))}else n=null;return!0!==t||a.isDate(n)||(n=new Date),n},e.formatDate=function(e,t){const a=this,n=a.parseDate(t);if("string"!=typeof e||!a.isDate(n))return t;const s={Y:n.getFullYear(),n:n.getMonth()+1,j:n.getDate(),G:n.getHours(),timestamp:n.getTime()};s.y=s.Y.toString(10).slice(-2),s.m=a.fillLeadZero(s.n,2),s.d=a.fillLeadZero(s.j,2),s.H=a.fillLeadZero(s.G,2),s.g=s.G>12?s.G-12:s.G,s.h=a.fillLeadZero(s.g,2),s.i=a.fillLeadZero(n.getMinutes(),2),s.s=a.fillLeadZero(n.getSeconds(),2);const o=["timestamp","Y","y","m","n","d","j","H","h","G","g","i","s"],i=new RegExp("("+o.join("|")+")","g");let d=e;d=d.replace(/([\{\}])/g,"\\$1"),d=d.replace(i,((e,t)=>"{{"+t+"}}")),d=d.replace(/\\\{\{(.)\}\}/g,"$1");for(let e of o)d=d.replace(new RegExp("{{"+e+"}}","g"),s[e]);return d=d.replace(/\\(.)/g,"$1"),d},e.getLanguage=function(e){return this.isObject(e)?e:("string"==typeof e&&e.length||("string"==typeof navigator.language?e=navigator.language:"string"==typeof navigator.browserLanguage&&(e=navigator.browserLanguage)),"string"==typeof e&&(e=e.toLowerCase()),"string"==typeof e&&e.length&&"object"==typeof n.languages[e]?n.languages[e]:n.languages.default)},e.init=function(){this.buildStage(),this.bindEvent()},e.buildStage=function(){const e=this;e.dom.panel=document.createElement("div"),e.dom.panel.classList.add("cxcalendar"),e.dom.head=document.createElement("div"),e.dom.head.classList.add("cxcalendar_hd"),e.dom.main=document.createElement("div"),e.dom.main.classList.add("cxcalendar_bd"),e.dom.acts=document.createElement("div"),e.dom.acts.classList.add("cxcalendar_acts"),e.dom.maskBg=document.createElement("div"),e.dom.maskBg.classList.add("cxcalendar_mask"),e.dom.yearSelect=document.createElement("select"),e.dom.yearSelect.classList.add("year"),e.dom.monthSelect=document.createElement("select"),e.dom.monthSelect.classList.add("month"),e.dom.dateSet=document.createElement("ul"),e.dom.timeSet=document.createElement("div"),e.dom.timeSet.classList.add("times"),e.dom.hourSelect=document.createElement("select"),e.dom.hourSelect.classList.add("hour"),e.dom.mintSelect=document.createElement("select"),e.dom.mintSelect.classList.add("mint"),e.dom.secsSelect=document.createElement("select"),e.dom.secsSelect.classList.add("secs"),e.dom.panel.insertAdjacentElement("beforeend",e.dom.main),e.dom.timeSet.insertAdjacentElement("beforeend",e.dom.hourSelect),e.dom.timeSet.insertAdjacentHTML("beforeend","<i></i>"),e.dom.timeSet.insertAdjacentElement("beforeend",e.dom.mintSelect),e.dom.timeSet.insertAdjacentHTML("beforeend","<i></i>"),e.dom.timeSet.insertAdjacentElement("beforeend",e.dom.secsSelect),e.dom.timeSet.insertAdjacentHTML("beforeend",'<a class="confirm" href="javascript://" rel="confirm"></a>'),e.dom.acts.innerHTML='<a class="today" href="javascript://" rel="today"></a><a class="clear" href="javascript://" rel="clear"></a>',document.body.insertAdjacentElement("beforeend",e.dom.panel),document.body.insertAdjacentElement("beforeend",e.dom.maskBg)},e.bindEvent=function(){const e=this;e.events.change=new CustomEvent("change",{bubbles:!0}),e.dom.maskBg.addEventListener("click",(()=>{e.hidePanel()})),e.dom.panel.addEventListener("click",(a=>{const n=a.target,s=n.nodeName.toLowerCase();if("a"===s&&n.rel)switch(event.preventDefault(),n.rel){case"prev":e.gotoPrev();break;case"next":e.gotoNext();break;case"today":e.hidePanel(),t.setDate((new Date).getTime());break;case"clear":e.hidePanel(),t.clearDate();break;case"confirm":let a;a="datetime"===t.settings.type&&"string"==typeof e.cacheDate.txt&&e.cacheDate.txt.length?e.cacheDate.txt:[t.defDate.year,t.defDate.month,t.defDate.day].join("-"),a+=" "+[e.dom.hourSelect.value,e.dom.mintSelect.value,e.dom.secsSelect.value].join(":"),e.hidePanel(),t.setDate(a)}else if("li"===s&&n.dataset.date){let a=n.dataset.date;if("string"!=typeof a||!a.length)return;for(let e of n.parentNode.querySelectorAll("li"))e.classList.remove("selected");if(n.classList.add("selected"),"datetime"===t.settings.type){const t=a.split("-");return void(e.cacheDate={year:parseInt(t[0],10),month:parseInt(t[1],10),day:parseInt(t[2],10),txt:a})}"month"===t.settings.type&&(a+="-1"),e.hidePanel(),t.setDate(a)}})),e.dom.panel.addEventListener("change",(a=>{const n=a.target;"select"===n.nodeName.toLowerCase()&&(n.classList.contains("year")?(["date","datetime"].indexOf(t.settings.type)>=0&&e.rebulidMonthSelect(),e.gotoDate()):n.classList.contains("month")&&e.gotoDate())}))},e.buildPanel=function(){const e=this;let a,n=t.defDate.year;t.settings.date?e.cacheDate={year:t.defDate.year,month:t.defDate.month,day:t.defDate.day,txt:[t.defDate.year,t.defDate.month,t.defDate.day].join("-")}:e.cacheDate={},e.dom.head.innerHTML="",e.dom.main.innerHTML="";const s=["cxcalendar","m_"+t.settings.type];if("string"==typeof t.settings.baseClass&&t.settings.baseClass.length&&s.push(t.settings.baseClass),e.dom.panel.className=s.join(" "),["month","date","datetime"].indexOf(t.settings.type)>=0){a="";for(let e=t.minDate.year;e<=t.maxDate.year;e++)a+='<option value="'+e+'">'+e+"</option>";e.dom.yearSelect.innerHTML=a,e.dom.yearSelect.value=n}else if("year"===t.settings.type){a="";for(let e=10*Math.floor(t.minDate.year/10);e<=t.maxDate.year;e+=t.settings.yearNum){e<=t.defDate.year&&(n=e),a+='<option value="'+e+'">'+e+" - ",a+=e+t.settings.yearNum-1,a+="</option>"}e.dom.yearSelect.innerHTML=a,e.dom.yearSelect.value=n}["date","datetime"].indexOf(t.settings.type)>=0?(e.dom.dateSet.className="days",e.dom.head.insertAdjacentElement("beforeend",e.dom.yearSelect),e.dom.head.insertAdjacentHTML("beforeend","<em></em>"),e.dom.head.insertAdjacentElement("beforeend",e.dom.monthSelect),e.dom.head.insertAdjacentHTML("beforeend","<em></em>"),e.dom.head.insertAdjacentHTML("beforeend",'<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),e.dom.main.insertAdjacentElement("beforeend",e.dom.dateSet),e.dom.panel.insertAdjacentElement("afterbegin",e.dom.head),e.dom.panel.insertAdjacentElement("beforeend",e.dom.acts),"datetime"===t.settings.type&&e.buildTimes(),e.rebulidMonthSelect(),e.dom.monthSelect.value=t.defDate.month,e.gotoDate([t.defDate.year,t.defDate.month].join("-"))):"time"===t.settings.type?(e.dom.panel.contains(e.dom.head)&&e.dom.panel.removeChild(e.dom.head),e.dom.panel.contains(e.dom.acts)&&e.dom.panel.removeChild(e.dom.acts),e.buildTimes()):"month"===t.settings.type?(e.dom.dateSet.className="months",e.dom.head.insertAdjacentElement("beforeend",e.dom.yearSelect),e.dom.head.insertAdjacentHTML("beforeend","<em></em>"),e.dom.head.insertAdjacentHTML("beforeend",'<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),e.dom.main.insertAdjacentElement("beforeend",e.dom.dateSet),e.dom.panel.insertAdjacentElement("afterbegin",e.dom.head),e.dom.panel.insertAdjacentElement("beforeend",e.dom.acts),e.gotoDate(t.defDate.year)):"year"===t.settings.type&&(e.dom.dateSet.className="years",e.dom.head.insertAdjacentElement("beforeend",e.dom.yearSelect),e.dom.head.insertAdjacentHTML("beforeend",'<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),e.dom.main.insertAdjacentElement("beforeend",e.dom.dateSet),e.dom.panel.insertAdjacentElement("afterbegin",e.dom.head),e.dom.panel.insertAdjacentElement("beforeend",e.dom.acts),e.gotoDate(t.defDate.year))},e.rebulidMonthSelect=function(){const e=this,a=parseInt(e.dom.yearSelect.value,10),n=parseInt(e.dom.monthSelect.value,10);let s,o=1,i=12,d="";a===t.minDate.year&&a===t.maxDate.year?(o=t.minDate.month,i=t.maxDate.month):a===t.minDate.year?o=t.minDate.month:a===t.maxDate.year&&(i=t.maxDate.month);for(let e=o;e<=i;e++)n===e&&(s=n),d+='<option value="'+e+'">'+t.language.monthList[e-1]+"</option>";e.dom.monthSelect.innerHTML=d,s&&(e.dom.monthSelect.value=s)},e.buildDays=function(e,a){const n=this;if(!n.isInteger(e)||!n.isInteger(a))return;const s=6-t.settings.weekStart,o=(7-t.settings.weekStart)%7,i=new Date(e,a-1,1);e=i.getFullYear(),a=i.getMonth()+1,e<t.minDate.year||e===t.minDate.year&&a<t.minDate.month?(e=t.minDate.year,a=t.minDate.month):(e>t.maxDate.year||e===t.maxDate.year&&a>t.maxDate.month)&&(e=t.maxDate.year,a=t.maxDate.month);const d=a-1,l=n.getMonthDays(e),r=new Date(e,d,1),c=new Date,m=[c.getFullYear(),c.getMonth()+1,c.getDate()].join("-");let u=r.getDay()-t.settings.weekStart;u<0&&(u+=7);let h=t.settings.lockRow?42:7*Math.ceil((l[d]+u)/7),g="";for(let e=0;e<7;e++)g+='<li class="week',e===s?g+=" sat":e===o&&(g+=" sun"),g+='">'+t.language.weekList[(e+t.settings.weekStart)%7]+"</li>";for(let i=0;i<h;i++){const r=[];let c=e,h=a,p=i-u+1;p<=0?(r.push("other"),h<=1?(c--,h=12,p=l[11]+p):(h--,p=l[d-1]+p)):p>l[d]&&(r.push("other"),h>=12?(c++,h=1,p-=l[0]):(h++,p-=l[d]));const f=new Date(c,h-1,p),y=f.getTime(),D=[c,h,p].join("-");let b="";if(D===n.cacheDate.txt?r.push("selected"):D===m&&r.push("now"),i%7===s?r.push("sat"):i%7===o&&r.push("sun"),(y<t.minDate.time||y>t.maxDate.time||Array.isArray(t.settings.disableWeek)&&t.settings.disableWeek.length&&t.settings.disableWeek.indexOf((i+t.settings.weekStart)%7)>=0||Array.isArray(t.settings.disableDay)&&t.settings.disableDay.length&&(t.settings.disableDay.indexOf(String(p))>=0||t.settings.disableDay.indexOf([h,p].join("-"))>=0||t.settings.disableDay.indexOf([c,h,p].join("-"))>=0))&&r.push("del"),n.holiday){const e=[[c,h,p].join("-"),[h,p].join("-")];for(let t of e)if("string"==typeof n.holiday[t]){r.push("holiday"),b=n.holiday[dKey];break}}g+="<li",r.length&&(g+=' class="'+r.join(" ")+'"'),-1===r.indexOf("del")&&(g+=' data-date="'+D+'"'),b.length&&(g+=' data-title="'+b+'"'),i%7==0&&(g+=' data-week-num="'+n.getWeekNum(f)+'"'),g+=">"+p+"</li>"}n.dom.dateSet.innerHTML=g,n.dom.yearSelect.value=e,n.dom.monthSelect.value=a},e.buildTimes=function(){const e=this;let a,n,s,o,i="",d="",l="";for(let e=0;e<24;e+=t.settings.hourStep)e<=t.defDate.hour&&(a=e),o=e<10?"0"+String(e):e,i+='<option value="'+o+'">'+o+"</option>";for(let e=0;e<60;e+=t.settings.minuteStep)e<=t.defDate.mint&&(n=e),o=e<10?"0"+String(e):e,d+='<option value="'+o+'">'+o+"</option>";for(let e=0;e<60;e+=t.settings.secondStep)e<=t.defDate.secs&&(s=e),o=e<10?"0"+String(e):e,l+='<option value="'+o+'">'+o+"</option>";a=e.fillLeadZero(a,2),n=e.fillLeadZero(n,2),s=e.fillLeadZero(s,2),e.dom.hourSelect.innerHTML=i,e.dom.hourSelect.value=a,e.dom.mintSelect.innerHTML=d,e.dom.mintSelect.value=n,e.dom.secsSelect.innerHTML=l,e.dom.secsSelect.value=s,e.dom.main.insertAdjacentElement("beforeend",e.dom.timeSet)},e.buildMonths=function(e){const a=this;if(!a.isInteger(e))return;const n=new Date,s=[n.getFullYear(),n.getMonth()+1].join("-"),o=[a.cacheDate.year,a.cacheDate.month].join("-");let i="";for(let a=1;a<=12;a++){const n=[],d=e+"-"+a;d===o?n.push("selected"):d===s&&n.push("now"),(e===t.minDate.year&&a<t.minDate.month||e===t.maxDate.year&&a>t.maxDate.month)&&n.push("del"),i+="<li",n.length&&(i+=' class="'+n.join(" ")+'"'),-1===n.indexOf("del")&&(i+=' data-date="'+d+'"'),i+=">"+t.language.monthList[a-1]+"</li>"}a.dom.dateSet.innerHTML=i},e.buildYears=function(e){const a=this;let n,s,o=t.minDate.year,i="";if(!a.isInteger(e))return;const d=parseInt(a.dom.yearSelect.value,10),l=(new Date).getFullYear();e<t.minDate.year?o=t.minDate.year:e>t.maxDate.year&&(o=t.maxDate.year),o=10*Math.floor(o/10),s=e-o,s>=t.settings.yearNum&&(o+=Math.floor(s/t.settings.yearNum)*t.settings.yearNum),n=o+t.settings.yearNum-1,d!==o&&(a.dom.yearSelect.value=o);for(let e=o;e<=n;e++){const n=[];e===a.cacheDate.year?n.push("selected"):e===l&&n.push("now"),(e<t.minDate.year||e>t.maxDate.year)&&n.push("del"),i+="<li",n.length&&(i+=' class="'+n.join(" ")+'"'),-1===n.indexOf("del")&&(i+=' data-date="'+e+'"'),i+=">"+e+"</li>"}a.dom.dateSet.innerHTML=i},e.gotoPrev=function(){const e=this;switch(t.settings.type){case"date":case"datetime":const t=e.dom.monthSelect.selectedIndex;t>0?(e.dom.monthSelect.selectedIndex-=1,e.dom.monthSelect.dispatchEvent(e.events.change)):0===t&&e.dom.yearSelect.selectedIndex>0&&(e.dom.yearSelect.selectedIndex-=1,e.rebulidMonthSelect(),e.dom.monthSelect.selectedIndex=e.dom.monthSelect.length-1,e.dom.monthSelect.dispatchEvent(e.events.change));break;case"month":case"year":e.dom.yearSelect.selectedIndex>0&&(e.dom.yearSelect.selectedIndex-=1,e.dom.yearSelect.dispatchEvent(e.events.change))}},e.gotoNext=function(){const e=this;switch(t.settings.type){case"date":case"datetime":const t=e.dom.monthSelect.selectedIndex,a=e.dom.monthSelect.length-1;t<a?(e.dom.monthSelect.selectedIndex+=1,e.dom.monthSelect.dispatchEvent(e.events.change)):t===a&&e.dom.yearSelect.selectedIndex<e.dom.yearSelect.length-1&&(e.dom.yearSelect.selectedIndex+=1,e.rebulidMonthSelect(),e.dom.monthSelect.selectedIndex=0,e.dom.monthSelect.dispatchEvent(e.events.change));break;case"month":case"year":e.dom.yearSelect.selectedIndex<e.dom.yearSelect.length-1&&(e.dom.yearSelect.selectedIndex+=1,e.dom.yearSelect.dispatchEvent(e.events.change))}},e.gotoDate=function(e){const a=this,n=parseInt(a.dom.yearSelect.value,10),s=parseInt(a.dom.monthSelect.value,10);let o,i,d;switch(void 0===e?(i=n,d=s):(o=a.parseDate(e,!0),i=o.getFullYear(),d=o.getMonth()+1,i===n&&d===s||(a.rebulidMonthSelect(),a.dom.monthSelect.value=d)),t.settings.type){case"date":case"datetime":a.buildDays(i,d);break;case"month":a.buildMonths(i);break;case"year":a.buildYears(i)}},e.showPanel=function(){const e=this;e.delayHide&&clearTimeout(e.delayHide);const a=t.settings.position,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=t.input.getBoundingClientRect(),i=o.width,d=o.height,l=o.top,r=o.left,c=l+window.pageYOffset-document.documentElement.clientTop,m=r+window.pageXOffset-document.documentElement.clientLeft,u=e.dom.panel.getBoundingClientRect(),h=u.width,g=u.height;let p=l+d+g>s?c-g:c+d,f=r+h>n?m-h+i:m;if("string"==typeof a&&a.length)switch(a){case"fixed":p=null,f=null;break;case"top":p=c-g;break;case"bottom":p=c+d;break;case"left":case"right":p=l+d+g>s?c+d-g:c,f="left"===a?m-h:m+i}"number"==typeof p&&"number"==typeof f&&(e.dom.panel.style.top=p+"px",e.dom.panel.style.left=f+"px"),e.dom.panel.classList.add("show")},e.hidePanel=function(){const e=this;e.dom.panel.classList.remove("show"),e.delayHide=setTimeout((()=>{e.dom.panel.removeAttribute("style")}),300)},e.detach=function(e){const t=this;if(!t.isElement(e))return;const a="id_"+e.dataset.cxCalendarId;delete e.dataset.cxCalendarId,"function"==typeof t.bindFuns[a]&&(e.removeEventListener("click",t.bindFuns[a]),delete t.bindFuns[a])},document.addEventListener("DOMContentLoaded",(()=>{e.init()}));const a=function(){const t=this;let a={},s=!1;for(let n of arguments)e.isElement(n)?t.input=n:e.isObject(n)?a=n:"boolean"==typeof n&&(s=n);if(!t.input||!t.input.nodeName||"input"!==t.input.nodeName.toLowerCase())return void console.warn("[cxCalendar] Not input element.");const o={baseClass:"baseClass",disableWeek:"disableWeek",disableDay:"disableDay",endDate:"endDate",format:"format",hourStep:"hourStep",language:"language",lockRow:"lockRow",minuteStep:"minuteStep",position:"position",secondStep:"secondStep",startDate:"startDate",type:"type",weekStart:"weekStart",yearNum:"yearNum"},i={};for(let e in o)"string"==typeof t.input.dataset[o[e]]&&t.input.dataset[o[e]].length&&("lockRow"===e?i[e]=Boolean(parseInt(t.input.dataset[o[e]],10)):["disableWeek","disableDay"].indexOf(e)>=0?i[e]=t.input.dataset[o[e]].split(","):i[e]=t.input.dataset[o[e]]);Array.isArray(i.disableWeek)&&i.disableWeek.forEach((e=>{})),t.settings=e.extend({},n.defaults,a,i),t.setOptions();let d="id_"+t.input.dataset.cxCalendarId;"function"==typeof e.bindFuns[d]&&t.detach(t.input),t.eventChange=new CustomEvent("change",{bubbles:!0}),s?(t.input.dataset.cxCalendarId=e.cxId,d="id_"+e.cxId,e.cxId++,e.bindFuns[d]=t.show.bind(t),t.input.addEventListener("click",e.bindFuns[d])):t.show()};a.prototype.setOptions=function(t){const a=this;let n,s,o;if(e.isObject(t)&&e.extend(a.settings,t),n=e.reg.isYear.test(a.settings.endDate)?new Date(a.settings.endDate,11,31):e.parseDate(a.settings.endDate,!0),n.setHours(23,59,59),a.maxDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),time:n.getTime()},s=e.reg.isYear.test(a.settings.startDate)?new Date(a.settings.startDate,0,1):e.parseDate(a.settings.startDate),e.isDate(s)||(s=new Date,s.setFullYear(s.getFullYear()-1)),s.getTime()>a.maxDate.time&&(s=new Date(a.maxDate.year-1,a.maxDate.month-1,a.maxDate.day)),s.setHours(0,0,0,0),a.minDate={year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),time:s.getTime()},o=e.parseDate(a.settings.date,!0),o.getTime()<a.minDate.time?o=e.parseDate(a.minDate.time,!0):o.getTime()>a.maxDate.time&&(o=e.parseDate(a.maxDate.time,!0)),a.defDate={year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate(),hour:o.getHours(),mint:o.getMinutes(),secs:o.getSeconds(),time:o.getTime()},a.settings.weekStart%=7,a.language=e.getLanguage(a.settings.language),Array.isArray(a.language.holiday)&&a.language.holiday.length){a.holiday={};for(let e of a.language.holiday)a.holiday[e.day]=e.name}else a.holiday=null},a.prototype.show=function(){const a=this,n=a.input.value;n&&n.length&&(a.settings.date=n,a.setOptions()),t=a,e.buildPanel(),e.showPanel()},a.prototype.hide=function(){e.hidePanel()},a.prototype.getDate=function(t){const a=this,n=a.input.value;return"string"==typeof t&&t.length||(t=a.settings.format),e.formatDate(t,n)},a.prototype.setDate=function(t){const a=this,n=a.input.value,s=e.parseDate(t);if(!e.isDate(s))return;let o=s.getTime();o<a.minDate.time?o=a.minDate.time:o>a.maxDate.time&&(o=a.maxDate.time);const i=e.formatDate(a.settings.format,o);n!==i&&(a.input.value=i,a.input.dispatchEvent(a.eventChange))},a.prototype.clearDate=function(){const e=this,t=e.input.value;t&&t.length&&(e.input.value="",e.input.dispatchEvent(e.eventChange))};const n=function(e,t,n){const s=new a(...arguments);if(n)return s};return n.attach=function(e,t){return this(e,t,!0)},n.detach=function(t){e.detach(t)},n.defaults={startDate:void 0,endDate:void 0,date:void 0,type:"date",format:"Y-m-d",weekStart:0,lockRow:!1,yearNum:20,hourStep:1,minuteStep:1,secondStep:1,disableWeek:[],disableDay:[],position:void 0,baseClass:void 0,language:void 0},n.languages={default:{monthList:["1","2","3","4","5","6","7","8","9","10","11","12"],weekList:["日","一","二","三","四","五","六"],holiday:[]}},n}));
